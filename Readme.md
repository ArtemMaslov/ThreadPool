# ThreadPool

В данном проекте реализован ThreadPool на C++. ThreadPool создаёт указанное в конструкторе количество потоков, получает от пользователя задачи (функция, функтор, лямбда-выражение), которые нужно выполнить, и распределяет их между свободными потоками. Задача, которая поступила в очередь первой, будет отдана на исполнение первой. После выполнения задачи можно получить её результат (возвращаемое функцией значение). После вызова деструктора ThreadPool, все работающие потоки будут закрыты и все занимаемые ресурсы освобождены. ThreadPool позволяет распределить задачи между потоками удобным способом.

ThreadPool имеет следующие интерфейсные функции:
1. AddTask - добавить задание  на выполнение.

2. GetTaskResult - получить результат выполнения задания.

3. Wait - ожидать завершения выполнения определённого задания.

4. WaitAll - ожидать завершения выполнения всех заданий.

Задание может быть двух типов:
1. Результат задания интересен пользователю. `isWaitable = true`. Для такого типа задания можно вызывать функцию Wait. ThreadPool не знает, когда пользователь захочет узнать результат выполнения задания, поэтому он будет хранить в памяти задание до вызова GetTaskResult.

2. Результат задания не интересен пользователю. `isWaitable = false`. Для данного типа задания функцию Wait вызывать нельзя. Тем не менее, можно дождаться завершения выполнения данного задания с помощью функции WaitAll. После завершения выполнения задания, ThreadPool автоматически освободит занимаемые им ресурсы.

## Использование

Склонировать репозиторий:
```
git clone https://github.com/ArtemMaslov/ThreadPool
cd ThreadPool
```

Проект разрабатывался в Visual Studio Code, поэтому для удобства можно открыть workspace-файл `ThreadPool.code-workspace`.
Зайти в папке проекта, выполнив команду `cd ThreadPool` ещё раз.

Скомпилировать проект и запустить:
```
make
make run
```

Будет запущена тестовая программа, приближенно вычисляющая интеграл Пуассона.

Для использования ThreadPool в качестве библиотеки необходимо добавить в разрабатываемый проект исходные файлы `ThreadPool.h`, `ThreadPool.cpp`, `ThreadPool_impl.h`.